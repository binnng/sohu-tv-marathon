var URL={getQueryData:function(a){a=a.replace(/^\?+/,"").replace(/&amp;/,"&");for(var b=a.split("&"),c=b.length,d={};c--;)if(item=b[c].split("="),item[0]){var e=item[1]||"";try{e=decodeURIComponent(e)}catch(f){e=unescape(e)}d[decodeURIComponent(item[0])]=e}return d},getQueryString:function(a){var b,c=window,d=c.location.search.substring(1);return b=URL.getQueryData(d),a in b?b[a]:null},getElSearchString:function(a){var a=$(a).get(0),b=a.search||"";if(!b){var c="FORM"==a.nodeName?a.getAttribute("action"):a.getAttribute("href"),d=c.indexOf("?");-1!==d&&(b=c.slice(d))}return b},setQueryString:function(a,b){var c,d,a=$(a),e=a.get(0),f=e.search,g=f||"";if(!f){var h,i=e.nodeName;if("FORM"==i){if("post"!=e.method.toLowerCase()){for(c in b){d=b[c];var j=$('input[name="'+c+'"]',a);j?j.val(d):a.append($('<input type="hidden" name="'+c+'" value="'+d+'" />'))}return}h=a.attr("action")||location+""}else h=a.attr("href")||location+"";var k=h.indexOf("?"),l=h.indexOf("#");-1==l&&(l=h.length),0>k||k>l?(g="",k=l):g=h.slice(k+1,l)}var m=URL.getQueryData(g),n=[];for(c in b)m[c]=b[c];for(c in m)d=m[c],n.push(c+(d?"="+encodeURIComponent(d):""));if(!(n.length<1)){var o="?"+n.join("&");if(f)e.search=o;else{var p="FORM"==i?"action":"href";a.attr(p,h.slice(0,k)+o+h.slice(l))}}},objToQueryString:function(a){var b,c,d,e=[];for(b in a)if(c=a[b],c instanceof Array)for(d=c.length;d--;)e.push(b+"[]="+encodeURIComponent(c[d]));else e.push(b+(""===c?"":"="+encodeURIComponent(c)));return e.join("&")}};