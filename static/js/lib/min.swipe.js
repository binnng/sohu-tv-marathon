var Swipe=function(){var a=document,b=window,c="ontouchstart"in b,d=b.navigator.userAgent,e=b.Zepto,f=/Android|HTC/i.test(d)||!!(b.navigator.platform+"").match(/Linux/i),g=parseFloat(b.devicePixelRatio)||1,h=c?"touchstart":"mousedown",i=c?"touchmove":"mousemove",j=c?"touchend":"mouseup",k=function(a){if(a instanceof k)return a;var b=a.changedTouches||a.originalEvent&&a.originalEvent.changedTouches;return this.event=a,this.originalEvent=b&&b.length>0?b[0]:a,this.target=a.target||a.srcElement,this.type=a.type,this},l=function(){var a=1;return f&&(b.screen.width/b.innerWidth).toFixed(2)==g.toFixed(2)&&(a=1/g),a}(),m={startX:0,startPoint:[0,0],lastX:0,page:1,pageCount:1,scrollerWidth:0,windowWidth:0,initiated:!1,events:{onTouchStart:h,onTouchMove:i,onTouchEnd:j},init:function(){m.initScroller(),e(a).on(m.events.onTouchEnd,m.onTouchEnd).on(m.events.onTouchMove,m.onTouchMove).on("touchcancel",m.onTouchCancel).on("click",m.onTouchCancel)},initScroller:function(b){b=b||a,e(".scroll_wrap",b).css({"-webkit-backface-visibility":"hidden",overflowX:"hidden","-webkit-transform":"translate3d(0,0,0)"}),e(".scroller",b).css({"-webkit-backface-visibility":"hidden","-webkit-transform":"translate3d(0,0,0)","-webkit-transition":"-webkit-transform 0"}).on(m.events.onTouchStart,m.onTouchStart)},scrollToElement:function(a,b){var c=a.parent(),d=c.get(0),e=d.offsetLeft,f=d.offsetLeft,g=-(a.offset().left-e),h=d.lastElementChild,i=h.offsetLeft+h.offsetWidth+e+f,j=c.parent().width(),k=i-j;j>-g&&-g+a.width()<j||(-k>g&&(g=-k),g>0?g=0:c.attr("startX",g).css({"-webkit-transform":"translate3d("+g+"px,0,0)","-webkit-transition-duration":b?"200ms":0}))},onTouchStart:function(a){var b=this,c=e(this),d=b.childElementCount;if(d>0){m.scrollerWidth=0,m.leftPadding=b.offsetLeft,m.rightPadding=b.offsetLeft;var f=b.lastElementChild;if(f&&(m.scrollerWidth=f.offsetLeft+f.offsetWidth+m.leftPadding+m.rightPadding),m.scrollerWidth<=b.parentNode.offsetWidth)return;m.touchElement=c,m.initiated=!0,c.css("-webkit-transition-duration","0"),m.startX=parseInt(c.attr("startX")||0,10),m.paginationElLeft=null,m.paginationElRight=null,m.windowWidth=c.parent().width();var g=b.firstElementChild;do{var h=e(g).get(0).offsetLeft;if(!m.paginationElLeft&&h+m.startX>=0&&(m.paginationElLeft=g),h+g.offsetWidth+m.startX>m.windowWidth){m.paginationElRight=g;break}}while(g=g.nextElementSibling);m.deltaXInsetBound=0;var i=new k(a).originalEvent;m.startPoint=[i.screenX*l,i.screenY*l]}},onTouchMove:function(a){if(!1!==m.initiated){var b=new k(a).originalEvent;if(deltaX=b.screenX*l-m.startPoint[0],deltaY=b.screenY*l-m.startPoint[1],deltaX>0&&m.startX>=0?m.lastX=m.startX+deltaX/2:0>deltaX&&-m.startX-deltaX>=m.scrollerWidth-m.windowWidth?m.lastX=-(m.scrollerWidth-m.windowWidth)+(deltaX-m.deltaXInsetBound)/2:(m.lastX=m.startX+deltaX,m.deltaXInsetBound=deltaX),!m.isSwiping&&Math.abs(deltaY)>Math.abs(deltaX))return m.initiated=!1,void 0;a.preventDefault(),m.isSwiping=!0,m.setPos(m.lastX)}},onTouchEnd:function(a){if(m.isSwiping){var b=0;if(m.lastX<m.startX){m.paginationElRight?(b=-1*m.paginationElRight.offsetLeft,m.page++):b=-1*m.paginationElLeft.offsetLeft;var c=m.scrollerWidth-m.windowWidth;-c>b&&(b=-c)}else if(m.lastX>m.startX&&m.paginationElLeft){var d=m.paginationElLeft,e=m.windowWidth-d.offsetWidth-d.offsetLeft;do if(b=-1*d.offsetLeft,b>e){m.page--;break}while(d=d.previousElementSibling)}b>0&&(b=0),m.touchElement.attr("startX",b),m.touchElement.css("-webkit-transition-duration","200ms"),m.setPos(b),a.preventDefault(),m.onTouchCancel()}},onTouchCancel:function(){m.isSwiping=!1,m.initiated=!1,m.touchElement=null},setPos:function(a){m.touchElement.css("-webkit-transform","translate3d("+a+"px,0,0)")}};return e().ready(function(){m.init()}),c||e(".scroller").on("mousedown",function(a){for(a=new k(a),elCur=a.target;elCur;){if(nodeName=elCur.nodeName,"A"==nodeName||"IMG"==nodeName){a.preventDefault();break}elCur=elCur.parentNode}},!1),m}();